
;function downloadCanvas(o,a){return console.log(document.getElementById(a).toDataURL()),!1}var CropApp=CropApp||{};CropApp.canvasArea=null,CropApp.image=null,CropApp.downloadCanvas=function(o,a,p){if(null==o||null==a||null==p)return!1;var r=a.cropper("getCroppedCanvas")||null,t=p.name||null,e=/.png/,n=/.jpeg/;if(p.type.match(e))r=r.toDataURL("image/png");else{if(!p.type.match(n))return!1;r=r.toDataURL("image/jpeg",.8)}(null!=r||null!=t)&&(console.log($(o)[0]),$(o).attr({download:t,href:r}))},CropApp.processUpload=function(o){var a=/image.*/;return o.target.files[0].type.match(a)?(CropApp.image=o.target.files[0],console.log(CropApp.image),CropApp.processImage(CropApp.image),!0):!1},CropApp.processImage=function(o){if(null!=o){var a=new FileReader;$(a).on("load",function(o){var a=o.target.result;CropApp.loadToCanvas(a)}),a.readAsDataURL(o)}},CropApp.loadToCanvas=function(o){CropApp.canvasArea.cropper("reset",!0).cropper("replace",o)},$(window).load(function(){var o=$(".cropper-container > img"),a=$('[data-crop="download"]'),p=$(".image-uploader"),r=$('[data-trigger="zoom-in"]'),t=$('[data-trigger="zoom-out"]'),e=$('[data-trigger="rotate-left"]'),n=$('[data-trigger="rotate-right"]'),c=$("[data-aspect-ratio]");$("select").material_select(),CropApp.canvasArea=o,o.cropper({aspectRatio:0/0,strict:!1,crop:function(o){$("#height_input").val(Math.round(o.height)),$("#width_input").val(Math.round(o.width))}}),a.on("click",function(){CropApp.downloadCanvas(this,CropApp.canvasArea,CropApp.image)}),p.on("change",CropApp.processUpload),r.on("click",function(){o.cropper("zoom",.1)}),t.on("click",function(){o.cropper("zoom",-.1)}),e.on("click",function(){o.cropper("rotate",-10)}),n.on("click",function(){o.cropper("rotate",10)}),c.on("click",function(){var a=$(this).data("aspectRatio");a=Number(a.split("/")[0])/Number(a.split("/")[1]),console.log(a),o.cropper("setAspectRatio",a)})});
